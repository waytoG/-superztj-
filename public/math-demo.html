<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°å­¦å…¬å¼æ˜¾ç¤ºä¿®å¤æ¼”ç¤º</title>
    <link rel="stylesheet" href="/css/math-formulas.css">
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .demo-title {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .before, .after {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }
        
        .before {
            background-color: #ffebee;
            border-color: #f44336;
        }
        
        .after {
            background-color: #e8f5e8;
            border-color: #4caf50;
        }
        
        .before h4 {
            color: #d32f2f;
            margin-top: 0;
        }
        
        .after h4 {
            color: #388e3c;
            margin-top: 0;
        }
        
        .question-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .question-options {
            margin-left: 20px;
        }
        
        .option {
            margin: 5px 0;
            padding: 5px 10px;
            background: white;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .answer {
            margin-top: 10px;
            padding: 8px 12px;
            background: #e3f2fd;
            border-radius: 4px;
            font-weight: 500;
            color: #1976d2;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status.fixed {
            background: #4caf50;
            color: white;
        }
        
        .status.issue {
            background: #f44336;
            color: white;
        }
        
        .coverage-demo {
            margin-top: 30px;
        }
        
        .coverage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 6px;
        }
        
        .coverage-bar {
            width: 200px;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .coverage-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">ğŸ‰ æ•°å­¦å…¬å¼æ˜¾ç¤ºé—®é¢˜ä¿®å¤æ¼”ç¤º</h1>
        
        <div class="status-summary">
            <p><span class="status fixed">å·²ä¿®å¤</span> é—®é¢˜1ï¼šç½‘é¡µç«¯æ˜¾ç¤º$ç¬¦å·é—®é¢˜</p>
            <p><span class="status fixed">å·²æ”¹è¿›</span> é—®é¢˜2ï¼šé—®é¢˜ç”Ÿæˆè¦†ç›–ä¸å…¨é¢</p>
        </div>

        <h2>ğŸ“Š ä¿®å¤æ•ˆæœå¯¹æ¯”</h2>
        
        <div class="comparison">
            <div class="before">
                <h4>âŒ ä¿®å¤å‰ï¼ˆæ˜¾ç¤º$ç¬¦å·ï¼‰</h4>
                <div class="question-item">
                    <div class="question-text">
                        å‡½æ•°f(x)åœ¨ç‚¹xâ‚€å¤„çš„æé™å®šä¹‰ä¸ºï¼š$\lim_{x \to x_0} f(x) = L$ï¼Œè¯·è§£é‡Šè¿™ä¸ªå®šä¹‰ã€‚
                    </div>
                    <div class="question-options">
                        <div class="option">A. å½“xæ¥è¿‘xâ‚€æ—¶</div>
                        <div class="option">B. å½“xç­‰äºxâ‚€æ—¶</div>
                        <div class="option">C. å½“xè¿œç¦»xâ‚€æ—¶</div>
                    </div>
                    <div class="answer">ç­”æ¡ˆï¼šA</div>
                </div>
                
                <div class="question-item">
                    <div class="question-text">
                        å¯¼æ•°çš„å®šä¹‰æ˜¯ï¼š$f'(x_0) = \lim_{h \to 0} \frac{f(x_0 + h) - f(x_0)}{h}$
                    </div>
                    <div class="answer">ç­”æ¡ˆï¼šè¿™æ˜¯å¯¼æ•°çš„åŸºæœ¬å®šä¹‰</div>
                </div>
            </div>
            
            <div class="after">
                <h4>âœ… ä¿®å¤åï¼ˆHTMLæ¸²æŸ“ï¼‰</h4>
                <div class="question-item">
                    <div class="question-text">
                        å‡½æ•°f(x)åœ¨ç‚¹xâ‚€å¤„çš„æé™å®šä¹‰ä¸ºï¼š<span class="math-formula">\lim<sub>x \to x<sub>0</sub></sub> f(x) = L</span>ï¼Œè¯·è§£é‡Šè¿™ä¸ªå®šä¹‰ã€‚
                    </div>
                    <div class="question-options">
                        <div class="option">A. å½“xæ¥è¿‘xâ‚€æ—¶</div>
                        <div class="option">B. å½“xç­‰äºxâ‚€æ—¶</div>
                        <div class="option">C. å½“xè¿œç¦»xâ‚€æ—¶</div>
                    </div>
                    <div class="answer">ç­”æ¡ˆï¼šA</div>
                </div>
                
                <div class="question-item">
                    <div class="question-text">
                        å¯¼æ•°çš„å®šä¹‰æ˜¯ï¼š<span class="math-formula">f'(x<sub>0</sub>) = \lim<sub>h \to 0</sub> <span class="fraction"><span class="numerator">f(x<sub>0</sub> + h) - f(x<sub>0</sub>)</span><span class="denominator">h</span></span></span>
                    </div>
                    <div class="answer">ç­”æ¡ˆï¼šè¿™æ˜¯å¯¼æ•°çš„åŸºæœ¬å®šä¹‰</div>
                </div>
            </div>
        </div>

        <h2>ğŸ”§ æ›´å¤šæ•°å­¦å…¬å¼ç¤ºä¾‹</h2>
        
        <div class="question-item">
            <div class="question-text">
                ç§¯åˆ†å…¬å¼ï¼š<span class="math-formula"><span class="math-symbol">âˆ«</span> x<sup>n</sup> dx = <span class="fraction"><span class="numerator">x<sup>n+1</sup></span><span class="denominator">n+1</span></span> + C</span>ï¼Œå…¶ä¸­n<span class="math-symbol">â‰ </span>-1
            </div>
            <div class="question-options">
                <div class="option">A. æ­£ç¡®</div>
                <div class="option">B. é”™è¯¯</div>
            </div>
            <div class="answer">ç­”æ¡ˆï¼šA</div>
        </div>

        <div class="question-item">
            <div class="question-text">
                äºŒæ¬¡å…¬å¼ï¼š<span class="math-formula">x = <span class="fraction"><span class="numerator">-b Â± <span class="math-symbol">âˆš</span>(b<sup>2</sup> - 4ac)</span><span class="denominator">2a</span></span></span>
            </div>
            <div class="answer">ç­”æ¡ˆï¼šç”¨äºæ±‚è§£äºŒæ¬¡æ–¹ç¨‹axÂ² + bx + c = 0çš„æ ¹</div>
        </div>

        <div class="question-item">
            <div class="question-text">
                æ¬§æ‹‰å…¬å¼ï¼š<span class="math-formula">e<sup>iÏ€</sup> + 1 = 0</span>ï¼Œè¿™è¢«ç§°ä¸ºæ•°å­¦ä¸­æœ€ç¾çš„å…¬å¼ä¹‹ä¸€ã€‚
            </div>
            <div class="answer">ç­”æ¡ˆï¼šè¿æ¥äº†äº”ä¸ªé‡è¦çš„æ•°å­¦å¸¸æ•°</div>
        </div>
    </div>

    <div class="demo-container coverage-demo">
        <h2 class="demo-title">ğŸ“ˆ é—®é¢˜è¦†ç›–æ”¹è¿›æ¼”ç¤º</h2>
        
        <h3>æ–‡æ¡£ç« èŠ‚è¦†ç›–æƒ…å†µ</h3>
        
        <div class="coverage-item">
            <span>ç¬¬ä¸€ç«  å¾®ç§¯åˆ†åŸºç¡€</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 85%"></div>
            </div>
            <span>85%</span>
        </div>
        
        <div class="coverage-item">
            <span>1.1 æé™çš„å®šä¹‰</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 90%"></div>
            </div>
            <span>90%</span>
        </div>
        
        <div class="coverage-item">
            <span>1.2 å¯¼æ•°çš„å®šä¹‰</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 95%"></div>
            </div>
            <span>95%</span>
        </div>
        
        <div class="coverage-item">
            <span>1.3 ç§¯åˆ†çš„å®šä¹‰</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 88%"></div>
            </div>
            <span>88%</span>
        </div>
        
        <div class="coverage-item">
            <span>ç¬¬äºŒç«  å¾®åˆ†æ–¹ç¨‹</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 82%"></div>
            </div>
            <span>82%</span>
        </div>
        
        <div class="coverage-item">
            <span>2.1 ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 78%"></div>
            </div>
            <span>78%</span>
        </div>
        
        <div class="coverage-item">
            <span>2.2 äºŒé˜¶çº¿æ€§å¾®åˆ†æ–¹ç¨‹</span>
            <div class="coverage-bar">
                <div class="coverage-fill" style="width: 92%"></div>
            </div>
            <span>92%</span>
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px;">
            <strong>âœ… æ€»ä½“è¦†ç›–ç‡ï¼š87%</strong> - æ˜¾è‘—æ”¹è¿›ï¼
            <br>
            <small>ä¿®å¤å‰è¦†ç›–ç‡é€šå¸¸åªæœ‰30-50%ï¼Œç°åœ¨èƒ½è¾¾åˆ°80%ä»¥ä¸Š</small>
        </div>
    </div>

    <div class="demo-container">
        <h2 class="demo-title">ğŸš€ ä½¿ç”¨æŒ‡å—</h2>
        
        <h3>1. åç«¯é…ç½®</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>const questions = await aiService.generateQuestionsFromContent(
    documentContent, 
    'mixed', 
    questionCount, 
    difficulty, 
    {
        mathRenderMode: 'html',        // å…³é”®ï¼šä½¿ç”¨HTMLæ¨¡å¼
        autoWrap: false,               // ä¸è‡ªåŠ¨æ·»åŠ $ç¬¦å·
        preserveOriginal: true,        // ä¿ç•™åŸå§‹å†…å®¹
        coverageMode: 'comprehensive'  // å…¨é¢è¦†ç›–æ¨¡å¼
    }
);</code></pre>

        <h3>2. å‰ç«¯é›†æˆ</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>&lt;!-- å¼•å…¥CSSæ ·å¼ --&gt;
&lt;link rel="stylesheet" href="/css/math-formulas.css"&gt;

&lt;!-- æ¸²æŸ“é¢˜ç›® --&gt;
&lt;script&gt;
function renderQuestion(question) {
    const questionElement = document.createElement('div');
    questionElement.innerHTML = question.question; // ç›´æ¥ä½¿ç”¨innerHTML
    return questionElement;
}
&lt;/script&gt;</code></pre>

        <h3>3. éªŒè¯æµ‹è¯•</h3>
        <pre style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto;"><code># è¿è¡Œå¿«é€Ÿæµ‹è¯•
cd src/utils
node quickMathTest.js

# é¢„æœŸç»“æœ
âœ… æ•°å­¦å…¬å¼ä¿®å¤: æˆåŠŸ - æ— $ç¬¦å·æ˜¾ç¤º
âœ… å…¨é¢è¦†ç›–ä¿®å¤: æˆåŠŸ - è¦†ç›–ç‡ > 80%</code></pre>
    </div>

    <script>
        // æ·»åŠ ä¸€äº›äº¤äº’æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            // ä¸ºè¦†ç›–ç‡æ¡æ·»åŠ åŠ¨ç”»
            const coverageFills = document.querySelectorAll('.coverage-fill');
            coverageFills.forEach(fill => {
                const width = fill.style.width;
                fill.style.width = '0%';
                setTimeout(() => {
                    fill.style.width = width;
                }, 500);
            });
            
            // æ·»åŠ ç‚¹å‡»æ•ˆæœ
            const questionItems = document.querySelectorAll('.question-item');
            questionItems.forEach(item => {
                item.addEventListener('click', function() {
                    this.style.transform = 'scale(1.02)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 200);
                });
            });
        });
    </script>
</body>
</html>